(this["webpackJsonpmovie-project"]=this["webpackJsonpmovie-project"]||[]).push([[0],{32:function(e,t,a){e.exports=a(49)},37:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(14),l=a.n(c),o=(a(37),a(3));var i=function(e){var t=Object(n.useState)({}),a=Object(o.a)(t,2),c=a[0],l=a[1];return Object(n.useEffect)((function(){var t=e.match,a="https://www.omdbapi.com/?apikey=".concat("ea9e7b56","&i=").concat(t.params.id);fetch(a).then((function(e){return e.json()})).then((function(e){l(e)}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"detail my-4"},r.a.createElement("div",{className:"poster"},r.a.createElement("img",{src:c.Poster,alt:""})),r.a.createElement("div",{className:"card detail-card w-75 mx-4",style:{width:"18rem"}},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},c.Title),r.a.createElement("h6",{className:"card-subtitle mb-2 text-muted"},c.Genre),r.a.createElement("p",{className:"card-text mb-2"},"Plot: ",c.Plot),r.a.createElement("h6",{className:"card-subtitle"},"Ratings:"),c.Ratings?c.Ratings.map((function(e){var t=e.Source,a=e.Value;return r.a.createElement("div",null,t,":",a)})):null,r.a.createElement("h6",{className:"card-subtitle mt-2"},"Ratings:",c.BoxOffice)))))},s=a(9),m=a.n(s),u=a(11),d=a(12),v=a(13),p=a(21),f=(a(41),a(43),{apiKey:"AIzaSyDRk0PKstKF2IQlp-946-JH1O6E5riLb3w",authDomain:"movie-proj.firebaseapp.com",databaseURL:"https://movie-proj.firebaseio.com",projectId:"movie-proj",storageBucket:"movie-proj.appspot.com",messagingSenderId:"585745501262",appId:"1:585745501262:web:ef39343d1eab4bded0871f",measurementId:"G-GQEX4EN6WK"}),h=new(function(){function e(){Object(d.a)(this,e),p.initializeApp(f),this.auth=p.auth(),this.db=p.firestore()}return Object(v.a)(e,[{key:"login",value:function(e,t){return this.auth.signInWithEmailAndPassword(e,t)}},{key:"logout",value:function(){return this.auth.signOut()}},{key:"register",value:function(){var e=Object(u.a)(m.a.mark((function e(t,a,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.auth.createUserWithEmailAndPassword(a,n);case 2:return e.abrupt("return",this.auth.currentUser.updateProfile({displayName:t}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"getCurrentUsername",value:function(){return this.auth.currentUser&&this.auth.currentUser.displayName}}]),e}()),b=(document.getElementById("modal"),function(e){var t=e.children;console.log("model called");var a=Object(n.useRef)(null);if(!a.current){var l=document.createElement("div");a.current=l}return Object(n.useEffect)((function(){var e=document.getElementById("modal");return e.appendChild(a.current),function(){return e.removeChild(a.current)}}),[]),Object(c.createPortal)(r.a.createElement("div",null,t),a.current)});var E=function(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(""),s=Object(o.a)(i,2),d=s[0],v=s[1],p=Object(n.useState)(""),f=Object(o.a)(p,2),E=f[0],g=f[1],N=Object(n.useState)(!1),O=Object(o.a)(N,2),j=O[0],y=O[1];function w(){return(w=Object(u.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,h.register(d,c,E);case 4:x(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}var x=function(){y((function(e){return!e}))};return r.a.createElement("div",{className:"login-container"},r.a.createElement("form",{className:"login-form"},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"email",className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"Enter email",value:c,onChange:function(e){return l(e.target.value)},onBlur:function(e){return l(e.target.value)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control",id:"name",placeholder:"User name",value:d,onChange:function(e){return v(e.target.value)},onBlur:function(e){return v(e.target.value)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",className:"form-control",id:"exampleInputPassword1",placeholder:"Set Password",value:E,onChange:function(e){return g(e.target.value)},onBlur:function(e){return g(e.target.value)}})),r.a.createElement("button",{type:"submit",className:"btn btn-primary mt-2",onClick:function(e){return w.apply(this,arguments)}},"Submit")),j?r.a.createElement(b,null,r.a.createElement("div",null,r.a.createElement("div",{classname:"modal",tabindex:"-1",role:"dialog"},r.a.createElement("div",{classname:"modal-dialog",role:"document"},r.a.createElement("div",{classname:"modal-content"},r.a.createElement("div",{classname:"modal-body"},r.a.createElement("p",null,"You have registered successfully.")),r.a.createElement("div",{classname:"modal-footer"},r.a.createElement("button",{type:"button",classname:"btn btn-primary",onClick:function(){y((function(e){return!e})),e.history.replace("/Search")}},"Get In."))))))):null)},g=a(5);var N=function(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(""),s=Object(o.a)(i,2),d=s[0],v=s[1];function p(){return(p=Object(u.a)(m.a.mark((function t(a){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,h.login(c,d);case 4:e.history.replace("/Search"),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),console.log(t.t0),"auth/user-not-found"===t.t0.code&&alert("User not found, please register your self first");case 11:case"end":return t.stop()}}),t,null,[[1,7]])})))).apply(this,arguments)}return r.a.createElement("div",{className:"login-container"},r.a.createElement("form",{className:"login-form",onSubmit:function(e){return p.apply(this,arguments)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"email",className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"Enter email",value:c,onChange:function(e){l(e.target.value)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",className:"form-control",id:"exampleInputPassword1",placeholder:"Password",value:d,onChange:function(e){v(e.target.value)}})),r.a.createElement("button",{type:"submit",className:"btn btn-primary mt-2"},"Submit")))};var O=function(e){return r.a.createElement("div",{className:"register-container mt-4"},r.a.createElement("label",null,"Login or Register to proceed further"),r.a.createElement(g.b,{className:"btn btn-warning mt-4",to:"/Register",style:{color:"#000"}},"Register"),r.a.createElement(g.b,{className:"btn btn-dark mt-4",to:"/Login"},"Login"))},j=a(4),y=a(20),w=a(19),x=Object(n.createContext)(),I=function(e){var t=e.reducer,a=e.initialState,c=e.children;return r.a.createElement(x.Provider,{value:Object(n.useReducer)(t,a)},c)},k=function(){return Object(n.useContext)(x)};var S=function(e){var t=e.Title,a=e.Poster,n=(e.Year,e.imdbID),c={color:"black"},l=k(),i=Object(o.a)(l,2),s=i[0].favorites,m=i[1];console.log("favorites",s);var u=function(e){console.log("id",e),-1===s.findIndex((function(t){return t.imdbID===e.imdbID}))?m({type:"ADD_TO_FAVORITE",favorites:e}):m({type:"REMOVE_FROM_FAVORITE",favorites:e})};return r.a.createElement("div",null,r.a.createElement("div",{className:"card mt-3",style:{width:"18rem"},key:n},r.a.createElement(g.b,{style:c,to:"/detail/".concat(n)},r.a.createElement("img",{src:a,className:"card-img-top",alt:t,height:"300px"})),r.a.createElement("div",{className:"card-body row d-flex align-items-center"},r.a.createElement("h5",{className:"card-title col-9"},r.a.createElement(g.b,{style:c,to:"/detail/".concat(n)},t)),-1!==s.findIndex((function(e){return e.imdbID===n}))?r.a.createElement("span",{className:"pl-2 col-3"},r.a.createElement("svg",{width:"3em",height:"3em",viewBox:"0 0 16 16",className:"bi bi-heart-fill",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",onClick:function(e){e.preventDefault(),u({Title:t,imdbID:n})}},r.a.createElement("path",{fillRule:"evenodd",d:"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"}))):r.a.createElement("span",{className:"pl-2 col-3"},r.a.createElement("svg",{width:"3em",height:"3em",viewBox:"0 0 16 16",className:"bi bi-heart",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",onClick:function(e){e.preventDefault(),u({Title:t,imdbID:n})}},r.a.createElement("path",{fillRule:"evenodd",d:"M8 2.748l-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z"}))))))},C=function(e){Object(y.a)(a,e);var t=Object(w.a)(a);function a(e){return Object(d.a)(this,a),t.call(this,e)}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props.searchResult;return r.a.createElement("div",{className:"d-flex flex-wrap justify-content-between result-container"},e.map((function(e){var t=e.Title,a=e.Poster,n=e.Year,c=e.imdbID;return r.a.createElement(S,{Title:t,Poster:a,Year:n,imdbID:c})})))}}]),a}(n.Component),D=function(e){Object(y.a)(a,e);var t=Object(w.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={searchText:"",resultList:[],movieFound:null,userInfo:null},n}return Object(v.a)(a,[{key:"searchMovie",value:function(){var e=this;console.log(this.state.searchText);var t=this.state.searchText,a="https://www.omdbapi.com/?apikey=".concat("ea9e7b56","&s=").concat(t);fetch(a).then((function(e){return e.json()})).then((function(t){var a=t.Search;"True"===t.Response?e.setState((function(e){return Object(j.a)(Object(j.a)({},e),{},{resultList:a,movieFound:!0})})):e.setState((function(e){return Object(j.a)(Object(j.a)({},e),{},{movieFound:!1})}))}))}},{key:"componentDidMount",value:function(){this.userInfo()}},{key:"userInfo",value:function(){console.log(h.getCurrentUsername()),this.setState((function(e){return Object(j.a)(Object(j.a)({},e),{},{userInfo:Object(j.a)(Object(j.a)({},e.userInfo),{},{name:h.getCurrentUsername()})})}))}},{key:"render",value:function(){var e=this;return console.log("render function of search"),console.log(this.state.movieFound),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"search-container"},r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.searchMovie()}},r.a.createElement("div",{className:"form-group search-form"},r.a.createElement("label",{htmlFor:"exampleInputEmail1"},"Search Your Movie Here"),r.a.createElement("input",{className:"form-control",id:"exampleInputEmail1",value:this.state.searchText,onChange:function(t){return e.setState({searchText:t.target.value})},onBlur:function(t){return e.setState({searchText:t.target.value})}}),r.a.createElement("button",{type:"submit",className:"btn mt-2 btn-primary"},"Submit"))),this.state.movieFound?r.a.createElement(C,{searchResult:this.state.resultList,movieFound:this.state.movieFound}):null!==this.state.movieFound?r.a.createElement("div",{className:"d-flex mt-4 justify-content-center"},r.a.createElement("h2",null,"No movies found")):r.a.createElement("div",null)))}}]),a}(n.Component),R=a(1);var F=function(e){var t=Object(n.useState)(null),a=Object(o.a)(t,2),c=(a[0],a[1]),l=Object(R.f)();return Object(n.useEffect)((function(){console.log(h.getCurrentUsername()),c((function(e){return{name:h.getCurrentUsername()}}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark sticky-top"},r.a.createElement("div",{className:"container"},r.a.createElement(g.b,{className:"navbar-brand",to:"/"},r.a.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",className:"bi bi-film mb-1",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{fillRule:"evenodd",d:"M0 1a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V1zm4 0h8v6H4V1zm8 8H4v6h8V9zM1 1h2v2H1V1zm2 3H1v2h2V4zM1 7h2v2H1V7zm2 3H1v2h2v-2zm-2 3h2v2H1v-2zM15 1h-2v2h2V1zm-2 3h2v2h-2V4zm2 3h-2v2h2V7zm-2 3h2v2h-2v-2zm2 3h-2v2h2v-2z"})),r.a.createElement("span",{className:"pl-2"},"Movie")),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNavDropdown","aria-controls":"navbarNavDropdown","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNavDropdown"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(g.b,{className:"nav-link",to:"/Search"},"Search")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(g.b,{className:"nav-link",to:"/Favorites"},"Favorites")),r.a.createElement("li",{className:"nav-item ml-2"},r.a.createElement("a",{className:"nav-link",onClick:function(){try{h.logout().then((function(e){console.log("logout res"),l.push("/"),console.log(e)}))}catch(e){console.log(e)}}},"Logout")))))))},T=a(31),z={favorites:[],user:null},M=function(e,t){switch(console.log(t,"action"),t.type){case"ADD_TO_FAVORITE":return Object(j.a)(Object(j.a)({},e),{},{favorites:[].concat(Object(T.a)(e.favorites),[t.favorites])});case"REMOVE_FROM_FAVORITE":var a=e.favorites.filter((function(e){return e.imdbID!==t.favorites.imdbID}));return Object(j.a)(Object(j.a)({},e),{},{favorites:a});default:return e}};var P=function(){var e=k(),t=Object(o.a)(e,2),a=t[0].favorites;return t[1],a.map((function(e){var t=e.Title,a=e.imdbID;return r.a.createElement("div",{className:"card mt-4"},r.a.createElement("div",{className:"card-body"},t,r.a.createElement("small",{className:"ml-4"},a)))}))};var V=function(){var e=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{path:"/",exact:!0,component:O}),r.a.createElement(R.a,{path:"/Register",component:E}),r.a.createElement(R.a,{path:"/Login",component:N}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(I,{initialState:z,reducer:M},r.a.createElement(g.a,null,r.a.createElement("div",null,r.a.createElement(R.c,null,r.a.createElement(R.a,{path:"/",exact:!0,component:e}),r.a.createElement(R.a,{path:"/Register",component:e}),r.a.createElement(R.a,{path:"/Login",component:e}),r.a.createElement(R.a,{component:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(F,null),r.a.createElement("div",{className:"container"},r.a.createElement(R.a,{path:"/Search",exact:!0,component:D}),r.a.createElement(R.a,{path:"/Detail/:id",component:i}),r.a.createElement(R.a,{path:"/Favorites",component:P})))}}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.91bf7eba.chunk.js.map